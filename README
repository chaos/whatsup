Whatsup determines and outputs the cluster nodes that are currently
up and down based on information gathered from ganglia.  It includes
the following:

* libnodeupdown
  - A C library to determine up or down nodes in a cluster.  Linked
    with -lnodeupdown.  See libnodeupdown(3)

* Libnodeupdown.pm
  - A Perl module developed with Perl Extensions that accesses
    the C library.  Perl extensions is limited and provides
    a very strange Perl API.  It is therefore recommended most users
    use Nodeupdown.pm.  See Libnodeupdown(3).

* Nodeupdown.pm
  - A Perl module that interfaces with Libnodeupdown.pm, hiding away
    the yuckiness of Libnodeupdown.pm.  See Nodeupdown(3).

* whatsup
  - A command that outputs the up and down nodes in a cluster. See
    whatsup(1).

When dealing with up and down nodes in a cluster, there is a
deficiency in ganglia that requires a work around.  Ganglia can report
nodes as down only if it has had previous communication with the node.
Therefore, if a node has never sent a ganglia message, ganglia has no
means of reporting the node as down.  For example, suppose a node from
your cluster was removed for servicing, then the remaining nodes were
rebooted.  The node that was removed for servicing will not be listed
by ganglia as down.

Therefore, to determine all of the down nodes in a cluster, a "master
list" of nodes is required by whatsup and the nodeupdown libraries.
There are a number of mechanisms that could be used for a "master
list" of nodes.  Currently the following "master list" mechanisms are
programmed.  The one you choose for your system must be selected by
selecting one of the following options in configure.

* None (--with-nomasterlist)
  - Whatsup and nodeupdown will only use ganglia data to determine the
    difference between up nodes, down nodes, and nodes in the cluster.

* Hosts file (--with-hostsfile)
  - This mechanism simply uses a file that lists the shortened
    hostname of every node in the cluster, one per line.  Comments can
    be placed in the file using a pound sign ('#') at the beginning of
    a line.  Configure can be used to specify a default location of this
    file.  If no default is chosen, the nodeupdown library and whatsup
    will assume /etc/nodeupdown_hostsfile.conf is the default file.
    If a default file is not put in the default location, nodeupdown
    and whatsup will always require the file location be specified.
    Please read the README.hostsfile_install file for installation
    instructions.

* Genders (--with-genders)
  - Uses a genders database and the genders library to determine all 
    of the nodes in the cluster.  Please read the
    README.genders_install file for installation instructions.

* Gendersllnl (--with-gendersllnl)
  - In addition to genders, uses the gendersllnl library to convert
    between node names and alternate node names.  For the most part,
    this is used in house at Lawrence Livermore National Laboratories
    and sister labs that have clusters and genders setup in a
    particular way that we like.  I have high doubts anyone else will
    ever this this option.

Other mechanisms may be implemented in the future.  If you are interested
in seeing some new mechanism implemented, feel free to e-mail me and I'll
see what I can do.

Comments, patches, fixes, suggestions are always welcome.

By the way, whatsup.spec.in defaults to the gendersllnl mechanism.
You'll probably want to specify a different one at the command line if
you plan on building a rpm package.

Albert Chu
chu11@llnl.gov
Lawrence Livermore National Laboratories
