\."#############################################################################
\."$Id: nodeupdown_load_data.3.in,v 1.14 2005-03-31 00:27:38 achu Exp $
\."#############################################################################
\."  Copyright (C) 2003 The Regents of the University of California.
\."  Produced at Lawrence Livermore National Laboratory (cf, DISCLAIMER).
\."  Written by Albert Chu <chu11@llnl.gov>
\."  UCRL-CODE-155699
\."  
\."  This file is part of Whatsup, tools and libraries for determining up and
\."  down nodes in a cluster.  For details, see http://www.llnl.gov/linux/.
\."
\."  Whatsup is free software; you can redistribute it and/or modify it under
\."  the terms of the GNU General Public License as published by the Free
\."  Software Foundation; either version 2 of the License, or (at your option)
\."  any later version.
\."  
\."  Whatsup is distributed in the hope that it will be useful, but WITHOUT 
\."  ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or 
\."  FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License 
\."  for more details.
\."  
\."  You should have received a copy of the GNU General Public License along
\."  with Whatsup; if not, write to the Free Software Foundation, Inc.,
\."  59 Temple Place, Suite 330, Boston, MA  02111-1307  USA.
\."############################################################################
.TH NODEUPDOWN_LOAD_DATA 3 "November 2003" "LLNL" "LIBNODEUPDOWN"
.SH NAME
nodeupdown_load_data \- load data from ganglia
.SH SYNOPSIS
.B #include <nodeupdown.h>
.sp
.if @MANPAGE_NOMASTERLIST@ \{
.BI "int nodeupdown_load_data(nodeupdown_t handle, const char *gmond_hostname, int gmond_port, int timeout_len, void *masterlist);"
\}
.if @MANPAGE_HOSTSFILE@ \{
.BI "int nodeupdown_load_data(nodeupdown_t handle, const char *gmond_hostname, int gmond_port, int timeout_len, char *hostsfile);"
\}
.if (@MANPAGE_GENDERS@ : @MANPAGE_GENDERSLLNL@) \{
.BI "int nodeupdown_load_data(nodeupdown_t handle, const char *gmond_hostname, int gmond_port, int timeout_len, char *gendersfile);"
\}
.br
.SH DESCRIPTION
\fBnodeupdown_load_data()\fR loads data from ganglia so
that the remaining nodeupdown library functions can properly return
information about up and down nodes.  

\fIhandle\fR is a nodeupdown
handle created by
.BR nodeupdown_handle_create (3).  

\fIgmond_hostname\fR should indicate the location of a non-deaf gmond
daemon server.  If \fIgmond_hostname\fR is NULL, nodeupdown assumes
the server is on the current node.

\fIgmond_port\fR should indicate the port number of the server.  If
\fIgmond_port\fR less than or equal to 0, nodeupdown assumes the
server is running on the default ganglia port.  

\fItimeout_len\fR should indicate the timeout length in seconds that
determines if a node is up or down.  If \fItimeout_len\fR is less than
or equal to 0, nodeupdown assumes the default timeout length defined
by NODEUPDOWN_TIMEOUT_LEN.
 
.if @MANPAGE_HOSTSFILE@ \{
\fIhostsfile\fR should indicate a filename that lists every node in
the cluster.  The file should list shortened hostnames, one per line.
Lines beginning with a pound sign ("#") will be ignored.  If set to
NULL, the default @NODEUPDOWN_MASTERLIST_DEFAULT@ will be used.
\}
.if (@MANPAGE_GENDERS@ : @MANPAGE_GENDERSLLNL@) \{
\fIgendersfile\fR should indicate the genders file to be loaded.  If
\fIgendersfile\fR is NULL, the default genders file
@NODEUPDOWN_MASTERLIST_DEFAULT@ will be used.
\}
.if @MANPAGE_NOMASTERLIST@ \{
\fImasterlist\fR can be set to anything, it will be ignored in this
configuration of nodeupdown.
\}

The default values used in \fBnodeupdown_load_data()\fR can
overwritten using a nodeupdown configuration file.  See
.BR nodeupdown.conf (5).
.br
.SH RETURN VALUES
On success, 0 is returned.  On error, -1 is returned, and an error
code is returned in \fIhandle\fR.  The error code can be retrieved via
.BR nodeupdown_errnum (3)
, and a description of the error code can be retrieved via
.BR nodeupdown_strerror (3).  
Error codes are defined in nodeupdown.h.
.br
.SH ERRORS
.TP
.B NODEUPDOWN_ERR_NULLHANDLE
The handle parameter is NULL.  The nodeupdown handle must be created
with
.BR nodeupdown_handle_create (3).
.TP
.if @MANPAGE_HOSTSFILE@ \{
.B NODEUPDOWN_ERR_OPEN
The hostsfile cannot be opened.
\}
.if (@MANPAGE_GENDERS@ : @MANPAGE_GENDERSLLNL@) \{
.B NODEUPDOWN_ERR_OPEN
The genders file cannot be opened.
\}
.TP
.B NODEUPDOWN_ERR_CONNECT	
Error connecting to gmond server specified by \fIgmond_hostname\fR,
\fIgmond_ip\fR, and \fIgmond_port\fR.
.TP
.B NODEUPDOWN_ERR_TIMEOUT
Connection to gmond server timed out.
.TP
.B NODEUPDOWN_ERR_HOSTNAME
Incorrect hostname specified by \fIgmond_hostname\fR.
.TP
.B NODEUPDOWN_ERR_ADDRESS
Incorrect network address specified by \fIgmond_ip\fR.
.TP
.B NODEUPDOWN_ERR_NETWORK
Internal network failure.
.TP
.B NODEUPDOWN_ERR_ISLOADED
.BR nodeupdown_load_data (3) 
has already been called with \fIhandle\fR.  
.TP
.B NODEUPDOWN_ERR_PARAMETERS
An incorrect parameter has been passed in.
.TP
.B NODEUPDOWN_ERR_OUTMEM
.BR malloc (3)
has failed internally, system is out of memory.
.TP
.B NODEUPDOWN_ERR_MASTERLIST
internal error with the Nodeupdown master list of nodes.
.TP
.B NODEUPDOWN_ERR_EXPAT
XML parsing error
.TP
.B NODEUPDOWN_ERR_CONF
Nodeupdown configuration file error
.TP
.B NODEUPDOWN_ERR_HOSTLIST
hostlist API has failed internally.
.TP
.B NODEUPDOWN_ERR_MAGIC 
\fIhandle\fR has an incorrect magic number.  \fIhandle\fR does not
point to a nodeupdown handle or \fIhandle\fR has been destroyed by
.BR nodeupdown_handle_destroy (3).
.TP
.B NODEUPDOWN_ERR_INTERNAL
An internal system error has occurred.  
.br
.SH FILES
/usr/include/nodeupdown.h
.SH SEE ALSO
libnodeupdown(3), nodeupdown_handle_create(3),
nodeupdown_handle_destroy(3), nodeupdown_errnum(3),
nodeupdown_strerror(3), nodeupdown.conf(5)
.if @MANPAGE_HOSTSFILE@ \{
nodeupdown_hostsfile.conf(5)
\}
