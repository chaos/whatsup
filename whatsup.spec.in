# $Id: whatsup.spec.in,v 1.13 2003-11-14 02:15:41 achu Exp $

Name:           @PROJECT@
Version:        @VERSION@
Release:        @RELEASE@

Summary:        whatsup
Group:          Applications/Communications
License:        GPL

BuildRoot:      %{_tmppath}/%{name}-%{version}

Source0:        %{name}-%{version}.tgz

Requires:       ganglia-monitor-core
Requires:       ganglia-monitor-core-lib 

# By default, we'll compile with gendersllnl if nothing else is specified
# Most of you don't have this library, pick something at the command line :-)
%{!?_with_nomasterlist: %{!?_with_hostsfile: %{!?_with_genders: %{!?_with_gendersllnl: %define _with_gendersllnl --with-gendersllnl}}}}

%if %{?_with_genders:1}%{!?_with_genders:0}
Requires:       genders >= 1.2
%endif
%if %{?_with_gendersllnl:1}%{!?_with_gendersllnl:0}
Requires:       gendersllnl
%endif

%description
whatsup is a tool that lists which nodes are currently up or down in a
cluster.  It determines which nodes are up or down based on
information gathered from genders and ganglia.

The nodeupdown library is a C library that allows users to 
programmatically determine if a node is up or down.

%prep
%setup

%build
./bootstrap
./configure --prefix=/usr --with-perl-install-prefix="$RPM_BUILD_ROOT/usr" \
        %{?_with_nomasterlist} \
        %{?_without_nomasterlist} \
        %{?_with_hostsfile} \
        %{?_without_hostsfile} \
        %{?_with_genders} \
        %{?_without_genders} \
        %{?_with_gendersllnl} \
        %{?_without_gendersllnl}
make

%install
rm -rf "$RPM_BUILD_ROOT"
DESTDIR="$RPM_BUILD_ROOT" make install

%clean
rm -rf "$RPM_BUILD_ROOT"

%files
%defattr(-,root,root,0755)
%doc AUTHORS
%doc COPYING
%doc ChangeLog
%doc INSTALL
%doc NEWS
%doc README
%{_bindir}/*
%{_includedir}/*
%{_libdir}/*
/usr/man/man1/
/usr/man/man3/
/usr/man/man5/
/usr/share/man/





