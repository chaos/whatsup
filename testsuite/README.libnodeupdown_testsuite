'libnodeupdown' regression test suite
-------------------------------------

I. INTRODUCTION

Ganglia and the ganglia library is developed outside of LLNL.
Subsequently, when significant changes are made to ganglia or the
ganglia library, the nodeupdown library may have to be updated.

This test suite should be used to ensure that any changes made to the
nodeupdown library remain consistent from release to release.

II. REQUIREMENTS

In order to run this test suite, the following are needed.

    1) three test nodes
    2) 'genders' installed on each test node
    3) 'ganglia' (and thus the 'gmond' ganglia server) installed on
       each test node
    2) 'pdsh' installed on atleast one of the test nodes
    3) 'pkill' installed on the same node as 'pdsh'


III. HOW TO RUN THE TESTSUITE

Step 1)

Modify the libnodeupdown_test.conf file appropriately.  It should list
the following (in order) on each line:

    1) the location of 'pdsh' 
        - i.e. /usr/bin/pdsh
    2) the location of 'pkill' 
        - i.e. /usr/bin/pkill
    3) the location of 'gmond' 
        - i.e. /usr/sbin/gmond
    4) location of libnodeupdown_test_gmond.conf
       - i.e. /home/achu/test/libnodeupdown_test_gmond.conf
       - if libnodeupdown_test_gmond.conf is not located in an NFS
         mounted location, the file must be distributed to the 
         same directory on each of the test nodes
    5) test node #1 hostname
    6) test node #2 hostname
    7) test node #3 hostname

    There must be 3 test nodes listed in the configuration file, no more, 
    and no less.		

Step 2)

Compile the test suite with 'make'.  

Step 3)

su to 'root'.  The test suite must be run as root because the test suite
uses 'pdsh' and 'pkill'.

Step 4)

Run the test suite with 'libnodeupdown_test'.
 
IV. BUGS

The libnodeupdown testsuite tests the functionality of libnodeupdown
by closing and starting gmond ganglia server daemons on the listed
test nodes.  This is done to simulate a set of nodes to be up or down.

Due to the constant closing and restarting of gmond servers, it is
possible for nodeupdown_load_data() to fail connecting to a server or
for functionality tests to fail if the gmond servers have not had time
to re-establish themselves after being restarted.  If a
nodeupdown_load_data() connection error occurs during the test suite,
simply try again.

Pauses have been put within the test suite to give the gmonds daemons
time to re-establish themselves.  However, there is always the
possibility the timeouts may be long enough.

V.  SPECIAL NOTES

Currently, the longest pause in the test suite will be 90 seconds.  So
don't give up if the test suite looks like it is hung.  

nodeupdown_get_hostlist_alternate_names() and
nodeupdown_get_list_alternate_names() are not tested for functionality
in this test suite.  Their functionality is dependent upon genders,
and not ganglia.
